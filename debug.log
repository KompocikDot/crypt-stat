2023-11-21 23:26:21,661 [INFO] HTTP Request: GET https://web-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest?symbol=BTC%2CETH%2CUSDT%2CBNB%2CXRP%2CUSDC%2CSOL%2CADA%2CDOGE%2CTRX&convert=USD%2CAUD%2CCAD%2CCHF%2CCNY%2CEUR%2CGBP%2CJPY%2CPLN%2CRUB%2CAED "HTTP/1.1 200 OK"
2023-11-21 23:26:21,662 [INFO] Scraped data with status: 200
2023-11-21 23:26:23,268 [INFO] Successfully inserted 110 new items
2023-11-21 23:26:33,392 [INFO] HTTP Request: GET https://web-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest?symbol=BTC%2CETH%2CUSDT%2CBNB%2CXRP%2CUSDC%2CSOL%2CADA%2CDOGE%2CTRX&convert=USD%2CAUD%2CCAD%2CCHF%2CCNY%2CEUR%2CGBP%2CJPY%2CPLN%2CRUB%2CAED "HTTP/1.1 200 OK"
2023-11-21 23:26:33,395 [INFO] Scraped data with status: 200
2023-11-21 23:26:34,914 [INFO] No new items
2023-11-21 23:26:40,152 [INFO] HTTP Request: GET https://web-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest?symbol=BTC%2CETH%2CUSDT%2CBNB%2CXRP%2CUSDC%2CSOL%2CADA%2CDOGE%2CTRX&convert=USD%2CAUD%2CCAD%2CCHF%2CCNY%2CEUR%2CGBP%2CJPY%2CPLN%2CRUB%2CAED "HTTP/1.1 200 OK"
2023-11-21 23:26:40,154 [INFO] Scraped data with status: 200
2023-11-21 23:26:41,734 [INFO] No new items
2023-11-21 23:26:51,863 [INFO] HTTP Request: GET https://web-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest?symbol=BTC%2CETH%2CUSDT%2CBNB%2CXRP%2CUSDC%2CSOL%2CADA%2CDOGE%2CTRX&convert=USD%2CAUD%2CCAD%2CCHF%2CCNY%2CEUR%2CGBP%2CJPY%2CPLN%2CRUB%2CAED "HTTP/1.1 200 OK"
2023-11-21 23:26:51,865 [INFO] Scraped data with status: 200
2023-11-21 23:26:53,443 [INFO] No new items
2023-11-21 23:27:03,569 [INFO] HTTP Request: GET https://web-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest?symbol=BTC%2CETH%2CUSDT%2CBNB%2CXRP%2CUSDC%2CSOL%2CADA%2CDOGE%2CTRX&convert=USD%2CAUD%2CCAD%2CCHF%2CCNY%2CEUR%2CGBP%2CJPY%2CPLN%2CRUB%2CAED "HTTP/1.1 200 OK"
2023-11-21 23:27:03,571 [INFO] Scraped data with status: 200
2023-11-21 23:27:05,138 [INFO] No new items
2023-11-21 23:27:15,264 [INFO] HTTP Request: GET https://web-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest?symbol=BTC%2CETH%2CUSDT%2CBNB%2CXRP%2CUSDC%2CSOL%2CADA%2CDOGE%2CTRX&convert=USD%2CAUD%2CCAD%2CCHF%2CCNY%2CEUR%2CGBP%2CJPY%2CPLN%2CRUB%2CAED "HTTP/1.1 200 OK"
2023-11-21 23:27:15,267 [INFO] Scraped data with status: 200
2023-11-21 23:27:16,845 [INFO] No new items
2023-11-21 23:27:26,845 [INFO] HTTP Request: GET https://web-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest?symbol=BTC%2CETH%2CUSDT%2CBNB%2CXRP%2CUSDC%2CSOL%2CADA%2CDOGE%2CTRX&convert=USD%2CAUD%2CCAD%2CCHF%2CCNY%2CEUR%2CGBP%2CJPY%2CPLN%2CRUB%2CAED "HTTP/1.1 200 OK"
2023-11-21 23:27:26,848 [INFO] Scraped data with status: 200
2023-11-21 23:27:28,578 [INFO] Successfully inserted 110 new items
2023-11-21 23:27:38,707 [INFO] HTTP Request: GET https://web-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest?symbol=BTC%2CETH%2CUSDT%2CBNB%2CXRP%2CUSDC%2CSOL%2CADA%2CDOGE%2CTRX&convert=USD%2CAUD%2CCAD%2CCHF%2CCNY%2CEUR%2CGBP%2CJPY%2CPLN%2CRUB%2CAED "HTTP/1.1 200 OK"
2023-11-21 23:27:38,711 [INFO] Scraped data with status: 200
2023-11-21 23:27:40,230 [INFO] No new items
2023-11-21 23:27:50,363 [INFO] HTTP Request: GET https://web-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest?symbol=BTC%2CETH%2CUSDT%2CBNB%2CXRP%2CUSDC%2CSOL%2CADA%2CDOGE%2CTRX&convert=USD%2CAUD%2CCAD%2CCHF%2CCNY%2CEUR%2CGBP%2CJPY%2CPLN%2CRUB%2CAED "HTTP/1.1 200 OK"
2023-11-21 23:27:50,365 [INFO] Scraped data with status: 200
2023-11-21 23:27:51,885 [INFO] No new items
2023-11-21 23:28:02,017 [INFO] HTTP Request: GET https://web-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest?symbol=BTC%2CETH%2CUSDT%2CBNB%2CXRP%2CUSDC%2CSOL%2CADA%2CDOGE%2CTRX&convert=USD%2CAUD%2CCAD%2CCHF%2CCNY%2CEUR%2CGBP%2CJPY%2CPLN%2CRUB%2CAED "HTTP/1.1 200 OK"
2023-11-21 23:28:02,019 [INFO] Scraped data with status: 200
2023-11-21 23:28:03,542 [INFO] No new items
2023-11-21 23:28:13,674 [INFO] HTTP Request: GET https://web-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest?symbol=BTC%2CETH%2CUSDT%2CBNB%2CXRP%2CUSDC%2CSOL%2CADA%2CDOGE%2CTRX&convert=USD%2CAUD%2CCAD%2CCHF%2CCNY%2CEUR%2CGBP%2CJPY%2CPLN%2CRUB%2CAED "HTTP/1.1 200 OK"
2023-11-21 23:28:13,676 [INFO] Scraped data with status: 200
2023-11-21 23:28:15,199 [INFO] No new items
2023-11-21 23:28:25,329 [INFO] HTTP Request: GET https://web-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest?symbol=BTC%2CETH%2CUSDT%2CBNB%2CXRP%2CUSDC%2CSOL%2CADA%2CDOGE%2CTRX&convert=USD%2CAUD%2CCAD%2CCHF%2CCNY%2CEUR%2CGBP%2CJPY%2CPLN%2CRUB%2CAED "HTTP/1.1 200 OK"
2023-11-21 23:28:25,333 [INFO] Scraped data with status: 200
2023-11-21 23:28:26,860 [INFO] No new items
2023-11-21 23:28:37,160 [INFO] HTTP Request: GET https://web-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest?symbol=BTC%2CETH%2CUSDT%2CBNB%2CXRP%2CUSDC%2CSOL%2CADA%2CDOGE%2CTRX&convert=USD%2CAUD%2CCAD%2CCHF%2CCNY%2CEUR%2CGBP%2CJPY%2CPLN%2CRUB%2CAED "HTTP/1.1 200 OK"
2023-11-21 23:28:37,162 [INFO] Scraped data with status: 200
2023-11-21 23:28:38,692 [INFO] Successfully inserted 110 new items
2023-11-21 23:28:48,817 [INFO] HTTP Request: GET https://web-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest?symbol=BTC%2CETH%2CUSDT%2CBNB%2CXRP%2CUSDC%2CSOL%2CADA%2CDOGE%2CTRX&convert=USD%2CAUD%2CCAD%2CCHF%2CCNY%2CEUR%2CGBP%2CJPY%2CPLN%2CRUB%2CAED "HTTP/1.1 200 OK"
2023-11-21 23:28:48,819 [INFO] Scraped data with status: 200
2023-11-21 23:28:50,348 [INFO] No new items
2023-11-21 23:29:01,452 [ERROR] Task exception was never retrieved
future: <Task finished name='Task-3' coro=<repeat_every.<locals>.decorator.<locals>.wrapped.<locals>.loop() done, defined at /Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/fastapi_utils/tasks.py:57> exception=OSError("Multiple exceptions: [Errno 61] Connect call failed ('127.0.0.1', 5432), [Errno 61] Connect call failed ('::1', 5432, 0, 0)")>
Traceback (most recent call last):
  File "/Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/fastapi_utils/tasks.py", line 73, in loop
    raise exc
  File "/Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/fastapi_utils/tasks.py", line 64, in loop
    await func()  # type: ignore
    ^^^^^^^^^^^^
  File "/Users/kacper/Documents/crypt-stat/backend/webapp.py", line 24, in run_background_worker
    app.state.db = await create_pool(os.getenv("DB_URL"))
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/asyncpg/pool.py", line 403, in _async__init__
    await self._initialize()
  File "/Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/asyncpg/pool.py", line 430, in _initialize
    await first_ch.connect()
  File "/Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/asyncpg/pool.py", line 128, in connect
    self._con = await self._pool._get_new_connection()
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/asyncpg/pool.py", line 502, in _get_new_connection
    con = await connection.connect(
          ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/asyncpg/connection.py", line 2329, in connect
    return await connect_utils._connect(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/asyncpg/connect_utils.py", line 1017, in _connect
    raise last_error or exceptions.TargetServerAttributeNotMatched(
  File "/Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/asyncpg/connect_utils.py", line 991, in _connect
    conn = await _connect_addr(
           ^^^^^^^^^^^^^^^^^^^^
  File "/Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/asyncpg/connect_utils.py", line 828, in _connect_addr
    return await __connect_addr(params, True, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/asyncpg/connect_utils.py", line 873, in __connect_addr
    tr, pr = await connector
             ^^^^^^^^^^^^^^^
  File "/Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/asyncpg/connect_utils.py", line 744, in _create_ssl_connection
    tr, pr = await loop.create_connection(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.6/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/base_events.py", line 1093, in create_connection
    raise OSError('Multiple exceptions: {}'.format(
OSError: Multiple exceptions: [Errno 61] Connect call failed ('127.0.0.1', 5432), [Errno 61] Connect call failed ('::1', 5432, 0, 0)
2023-11-21 23:35:34,793 [ERROR] Could not connect to db - it's most likely down Multiple exceptions: [Errno 61] Connect call failed ('127.0.0.1', 5432), [Errno 61] Connect call failed ('::1', 5432, 0, 0)
Traceback (most recent call last):
  File "/Users/kacper/Documents/crypt-stat/backend/webapp.py", line 30, in run_background_worker
    app.state.db = await create_pool(os.getenv("DB_URL"))
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/asyncpg/pool.py", line 403, in _async__init__
    await self._initialize()
  File "/Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/asyncpg/pool.py", line 430, in _initialize
    await first_ch.connect()
  File "/Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/asyncpg/pool.py", line 128, in connect
    self._con = await self._pool._get_new_connection()
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/asyncpg/pool.py", line 502, in _get_new_connection
    con = await connection.connect(
          ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/asyncpg/connection.py", line 2329, in connect
    return await connect_utils._connect(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/asyncpg/connect_utils.py", line 1017, in _connect
    raise last_error or exceptions.TargetServerAttributeNotMatched(
  File "/Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/asyncpg/connect_utils.py", line 991, in _connect
    conn = await _connect_addr(
           ^^^^^^^^^^^^^^^^^^^^
  File "/Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/asyncpg/connect_utils.py", line 828, in _connect_addr
    return await __connect_addr(params, True, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/asyncpg/connect_utils.py", line 873, in __connect_addr
    tr, pr = await connector
             ^^^^^^^^^^^^^^^
  File "/Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/asyncpg/connect_utils.py", line 744, in _create_ssl_connection
    tr, pr = await loop.create_connection(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.6/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/base_events.py", line 1093, in create_connection
    raise OSError('Multiple exceptions: {}'.format(
OSError: Multiple exceptions: [Errno 61] Connect call failed ('127.0.0.1', 5432), [Errno 61] Connect call failed ('::1', 5432, 0, 0)
2023-11-21 23:35:34,798 [ERROR] Task exception was never retrieved
future: <Task finished name='Task-3' coro=<repeat_every.<locals>.decorator.<locals>.wrapped.<locals>.loop() done, defined at /Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/fastapi_utils/tasks.py:57> exception=AttributeError("'State' object has no attribute 'db'")>
Traceback (most recent call last):
  File "/Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/starlette/datastructures.py", line 702, in __getattr__
    return self._state[key]
           ~~~~~~~~~~~^^^^^
KeyError: 'db'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/fastapi_utils/tasks.py", line 73, in loop
    raise exc
  File "/Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/fastapi_utils/tasks.py", line 64, in loop
    await func()  # type: ignore
    ^^^^^^^^^^^^
  File "/Users/kacper/Documents/crypt-stat/backend/webapp.py", line 34, in run_background_worker
    worker = Worker(db_pool=app.state.db)
                            ^^^^^^^^^^^^
  File "/Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/starlette/datastructures.py", line 705, in __getattr__
    raise AttributeError(message.format(self.__class__.__name__, key))
AttributeError: 'State' object has no attribute 'db'
2023-11-21 23:36:08,603 [ERROR] Could not connect to db - it's most likely down
Traceback (most recent call last):
  File "/Users/kacper/Documents/crypt-stat/backend/webapp.py", line 30, in run_background_worker
    app.state.db = await create_pool(os.getenv("DB_URL"))
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/asyncpg/pool.py", line 403, in _async__init__
    await self._initialize()
  File "/Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/asyncpg/pool.py", line 430, in _initialize
    await first_ch.connect()
  File "/Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/asyncpg/pool.py", line 128, in connect
    self._con = await self._pool._get_new_connection()
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/asyncpg/pool.py", line 502, in _get_new_connection
    con = await connection.connect(
          ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/asyncpg/connection.py", line 2329, in connect
    return await connect_utils._connect(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/asyncpg/connect_utils.py", line 1017, in _connect
    raise last_error or exceptions.TargetServerAttributeNotMatched(
  File "/Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/asyncpg/connect_utils.py", line 991, in _connect
    conn = await _connect_addr(
           ^^^^^^^^^^^^^^^^^^^^
  File "/Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/asyncpg/connect_utils.py", line 828, in _connect_addr
    return await __connect_addr(params, True, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/asyncpg/connect_utils.py", line 873, in __connect_addr
    tr, pr = await connector
             ^^^^^^^^^^^^^^^
  File "/Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/asyncpg/connect_utils.py", line 744, in _create_ssl_connection
    tr, pr = await loop.create_connection(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.6/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/base_events.py", line 1093, in create_connection
    raise OSError('Multiple exceptions: {}'.format(
OSError: Multiple exceptions: [Errno 61] Connect call failed ('127.0.0.1', 5432), [Errno 61] Connect call failed ('::1', 5432, 0, 0)
2023-11-21 23:36:08,604 [ERROR] Task exception was never retrieved
future: <Task finished name='Task-3' coro=<repeat_every.<locals>.decorator.<locals>.wrapped.<locals>.loop() done, defined at /Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/fastapi_utils/tasks.py:57> exception=AttributeError("'State' object has no attribute 'db'")>
Traceback (most recent call last):
  File "/Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/starlette/datastructures.py", line 702, in __getattr__
    return self._state[key]
           ~~~~~~~~~~~^^^^^
KeyError: 'db'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/fastapi_utils/tasks.py", line 73, in loop
    raise exc
  File "/Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/fastapi_utils/tasks.py", line 64, in loop
    await func()  # type: ignore
    ^^^^^^^^^^^^
  File "/Users/kacper/Documents/crypt-stat/backend/webapp.py", line 34, in run_background_worker
    worker = Worker(db_pool=app.state.db)
                            ^^^^^^^^^^^^
  File "/Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/starlette/datastructures.py", line 705, in __getattr__
    raise AttributeError(message.format(self.__class__.__name__, key))
AttributeError: 'State' object has no attribute 'db'
2023-11-21 23:36:30,440 [ERROR] Could not connect to db - it's most likely down
Traceback (most recent call last):
  File "/Users/kacper/Documents/crypt-stat/backend/webapp.py", line 30, in run_background_worker
    app.state.db = await create_pool(os.getenv("DB_URL"))
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/asyncpg/pool.py", line 403, in _async__init__
    await self._initialize()
  File "/Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/asyncpg/pool.py", line 430, in _initialize
    await first_ch.connect()
  File "/Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/asyncpg/pool.py", line 128, in connect
    self._con = await self._pool._get_new_connection()
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/asyncpg/pool.py", line 502, in _get_new_connection
    con = await connection.connect(
          ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/asyncpg/connection.py", line 2329, in connect
    return await connect_utils._connect(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/asyncpg/connect_utils.py", line 1017, in _connect
    raise last_error or exceptions.TargetServerAttributeNotMatched(
  File "/Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/asyncpg/connect_utils.py", line 991, in _connect
    conn = await _connect_addr(
           ^^^^^^^^^^^^^^^^^^^^
  File "/Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/asyncpg/connect_utils.py", line 828, in _connect_addr
    return await __connect_addr(params, True, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/asyncpg/connect_utils.py", line 873, in __connect_addr
    tr, pr = await connector
             ^^^^^^^^^^^^^^^
  File "/Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/asyncpg/connect_utils.py", line 744, in _create_ssl_connection
    tr, pr = await loop.create_connection(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.6/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/base_events.py", line 1093, in create_connection
    raise OSError('Multiple exceptions: {}'.format(
OSError: Multiple exceptions: [Errno 61] Connect call failed ('127.0.0.1', 5432), [Errno 61] Connect call failed ('::1', 5432, 0, 0)
2023-11-21 23:36:30,441 [ERROR] Task exception was never retrieved
future: <Task finished name='Task-3' coro=<repeat_every.<locals>.decorator.<locals>.wrapped.<locals>.loop() done, defined at /Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/fastapi_utils/tasks.py:57> exception=AttributeError("module 'os' has no attribute 'exit'")>
Traceback (most recent call last):
  File "/Users/kacper/Documents/crypt-stat/backend/webapp.py", line 30, in run_background_worker
    app.state.db = await create_pool(os.getenv("DB_URL"))
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/asyncpg/pool.py", line 403, in _async__init__
    await self._initialize()
  File "/Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/asyncpg/pool.py", line 430, in _initialize
    await first_ch.connect()
  File "/Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/asyncpg/pool.py", line 128, in connect
    self._con = await self._pool._get_new_connection()
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/asyncpg/pool.py", line 502, in _get_new_connection
    con = await connection.connect(
          ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/asyncpg/connection.py", line 2329, in connect
    return await connect_utils._connect(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/asyncpg/connect_utils.py", line 1017, in _connect
    raise last_error or exceptions.TargetServerAttributeNotMatched(
  File "/Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/asyncpg/connect_utils.py", line 991, in _connect
    conn = await _connect_addr(
           ^^^^^^^^^^^^^^^^^^^^
  File "/Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/asyncpg/connect_utils.py", line 828, in _connect_addr
    return await __connect_addr(params, True, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/asyncpg/connect_utils.py", line 873, in __connect_addr
    tr, pr = await connector
             ^^^^^^^^^^^^^^^
  File "/Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/asyncpg/connect_utils.py", line 744, in _create_ssl_connection
    tr, pr = await loop.create_connection(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.6/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/base_events.py", line 1093, in create_connection
    raise OSError('Multiple exceptions: {}'.format(
OSError: Multiple exceptions: [Errno 61] Connect call failed ('127.0.0.1', 5432), [Errno 61] Connect call failed ('::1', 5432, 0, 0)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/fastapi_utils/tasks.py", line 73, in loop
    raise exc
  File "/Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/fastapi_utils/tasks.py", line 64, in loop
    await func()  # type: ignore
    ^^^^^^^^^^^^
  File "/Users/kacper/Documents/crypt-stat/backend/webapp.py", line 33, in run_background_worker
    os.exit(1)
    ^^^^^^^
AttributeError: module 'os' has no attribute 'exit'
2023-11-21 23:36:55,251 [ERROR] Could not connect to db - it's most likely down
Traceback (most recent call last):
  File "/Users/kacper/Documents/crypt-stat/backend/webapp.py", line 30, in run_background_worker
    app.state.db = await create_pool(os.getenv("DB_URL"))
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/asyncpg/pool.py", line 403, in _async__init__
    await self._initialize()
  File "/Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/asyncpg/pool.py", line 430, in _initialize
    await first_ch.connect()
  File "/Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/asyncpg/pool.py", line 128, in connect
    self._con = await self._pool._get_new_connection()
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/asyncpg/pool.py", line 502, in _get_new_connection
    con = await connection.connect(
          ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/asyncpg/connection.py", line 2329, in connect
    return await connect_utils._connect(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/asyncpg/connect_utils.py", line 1017, in _connect
    raise last_error or exceptions.TargetServerAttributeNotMatched(
  File "/Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/asyncpg/connect_utils.py", line 991, in _connect
    conn = await _connect_addr(
           ^^^^^^^^^^^^^^^^^^^^
  File "/Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/asyncpg/connect_utils.py", line 828, in _connect_addr
    return await __connect_addr(params, True, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/asyncpg/connect_utils.py", line 873, in __connect_addr
    tr, pr = await connector
             ^^^^^^^^^^^^^^^
  File "/Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/asyncpg/connect_utils.py", line 744, in _create_ssl_connection
    tr, pr = await loop.create_connection(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.6/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/base_events.py", line 1093, in create_connection
    raise OSError('Multiple exceptions: {}'.format(
OSError: Multiple exceptions: [Errno 61] Connect call failed ('127.0.0.1', 5432), [Errno 61] Connect call failed ('::1', 5432, 0, 0)
2023-11-21 23:36:55,267 [ERROR] Task exception was never retrieved
future: <Task finished name='Task-3' coro=<repeat_every.<locals>.decorator.<locals>.wrapped.<locals>.loop() done, defined at /Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/fastapi_utils/tasks.py:57> exception=SystemExit(1)>
Traceback (most recent call last):
  File "/Users/kacper/Documents/crypt-stat/backend/webapp.py", line 30, in run_background_worker
    app.state.db = await create_pool(os.getenv("DB_URL"))
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/asyncpg/pool.py", line 403, in _async__init__
    await self._initialize()
  File "/Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/asyncpg/pool.py", line 430, in _initialize
    await first_ch.connect()
  File "/Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/asyncpg/pool.py", line 128, in connect
    self._con = await self._pool._get_new_connection()
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/asyncpg/pool.py", line 502, in _get_new_connection
    con = await connection.connect(
          ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/asyncpg/connection.py", line 2329, in connect
    return await connect_utils._connect(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/asyncpg/connect_utils.py", line 1017, in _connect
    raise last_error or exceptions.TargetServerAttributeNotMatched(
  File "/Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/asyncpg/connect_utils.py", line 991, in _connect
    conn = await _connect_addr(
           ^^^^^^^^^^^^^^^^^^^^
  File "/Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/asyncpg/connect_utils.py", line 828, in _connect_addr
    return await __connect_addr(params, True, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/asyncpg/connect_utils.py", line 873, in __connect_addr
    tr, pr = await connector
             ^^^^^^^^^^^^^^^
  File "/Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/asyncpg/connect_utils.py", line 744, in _create_ssl_connection
    tr, pr = await loop.create_connection(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.6/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/base_events.py", line 1093, in create_connection
    raise OSError('Multiple exceptions: {}'.format(
OSError: Multiple exceptions: [Errno 61] Connect call failed ('127.0.0.1', 5432), [Errno 61] Connect call failed ('::1', 5432, 0, 0)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/opt/homebrew/Cellar/python@3.11/3.11.6/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           ^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.6/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.6/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/base_events.py", line 640, in run_until_complete
    self.run_forever()
  File "/opt/homebrew/Cellar/python@3.11/3.11.6/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/base_events.py", line 607, in run_forever
    self._run_once()
  File "/opt/homebrew/Cellar/python@3.11/3.11.6/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/base_events.py", line 1922, in _run_once
    handle._run()
  File "/opt/homebrew/Cellar/python@3.11/3.11.6/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
  File "/Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/fastapi_utils/tasks.py", line 64, in loop
    await func()  # type: ignore
    ^^^^^^^^^^^^
  File "/Users/kacper/Documents/crypt-stat/backend/webapp.py", line 33, in run_background_worker
    exit(1)
  File "<frozen _sitebuiltins>", line 26, in __call__
SystemExit: 1
2023-11-21 23:37:09,483 [ERROR] Could not connect to db - it's most likely down
Traceback (most recent call last):
  File "/Users/kacper/Documents/crypt-stat/backend/webapp.py", line 30, in run_background_worker
    app.state.db = await create_pool(os.getenv("DB_URL"))
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/asyncpg/pool.py", line 403, in _async__init__
    await self._initialize()
  File "/Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/asyncpg/pool.py", line 430, in _initialize
    await first_ch.connect()
  File "/Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/asyncpg/pool.py", line 128, in connect
    self._con = await self._pool._get_new_connection()
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/asyncpg/pool.py", line 502, in _get_new_connection
    con = await connection.connect(
          ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/asyncpg/connection.py", line 2329, in connect
    return await connect_utils._connect(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/asyncpg/connect_utils.py", line 1017, in _connect
    raise last_error or exceptions.TargetServerAttributeNotMatched(
  File "/Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/asyncpg/connect_utils.py", line 991, in _connect
    conn = await _connect_addr(
           ^^^^^^^^^^^^^^^^^^^^
  File "/Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/asyncpg/connect_utils.py", line 828, in _connect_addr
    return await __connect_addr(params, True, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/asyncpg/connect_utils.py", line 873, in __connect_addr
    tr, pr = await connector
             ^^^^^^^^^^^^^^^
  File "/Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/asyncpg/connect_utils.py", line 744, in _create_ssl_connection
    tr, pr = await loop.create_connection(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.6/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/base_events.py", line 1093, in create_connection
    raise OSError('Multiple exceptions: {}'.format(
OSError: Multiple exceptions: [Errno 61] Connect call failed ('127.0.0.1', 5432), [Errno 61] Connect call failed ('::1', 5432, 0, 0)
2023-11-21 23:37:09,499 [ERROR] Task exception was never retrieved
future: <Task finished name='Task-3' coro=<repeat_every.<locals>.decorator.<locals>.wrapped.<locals>.loop() done, defined at /Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/fastapi_utils/tasks.py:57> exception=SystemExit(0)>
Traceback (most recent call last):
  File "/Users/kacper/Documents/crypt-stat/backend/webapp.py", line 30, in run_background_worker
    app.state.db = await create_pool(os.getenv("DB_URL"))
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/asyncpg/pool.py", line 403, in _async__init__
    await self._initialize()
  File "/Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/asyncpg/pool.py", line 430, in _initialize
    await first_ch.connect()
  File "/Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/asyncpg/pool.py", line 128, in connect
    self._con = await self._pool._get_new_connection()
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/asyncpg/pool.py", line 502, in _get_new_connection
    con = await connection.connect(
          ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/asyncpg/connection.py", line 2329, in connect
    return await connect_utils._connect(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/asyncpg/connect_utils.py", line 1017, in _connect
    raise last_error or exceptions.TargetServerAttributeNotMatched(
  File "/Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/asyncpg/connect_utils.py", line 991, in _connect
    conn = await _connect_addr(
           ^^^^^^^^^^^^^^^^^^^^
  File "/Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/asyncpg/connect_utils.py", line 828, in _connect_addr
    return await __connect_addr(params, True, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/asyncpg/connect_utils.py", line 873, in __connect_addr
    tr, pr = await connector
             ^^^^^^^^^^^^^^^
  File "/Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/asyncpg/connect_utils.py", line 744, in _create_ssl_connection
    tr, pr = await loop.create_connection(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.6/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/base_events.py", line 1093, in create_connection
    raise OSError('Multiple exceptions: {}'.format(
OSError: Multiple exceptions: [Errno 61] Connect call failed ('127.0.0.1', 5432), [Errno 61] Connect call failed ('::1', 5432, 0, 0)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/opt/homebrew/Cellar/python@3.11/3.11.6/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           ^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.6/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.6/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/base_events.py", line 640, in run_until_complete
    self.run_forever()
  File "/opt/homebrew/Cellar/python@3.11/3.11.6/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/base_events.py", line 607, in run_forever
    self._run_once()
  File "/opt/homebrew/Cellar/python@3.11/3.11.6/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/base_events.py", line 1922, in _run_once
    handle._run()
  File "/opt/homebrew/Cellar/python@3.11/3.11.6/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
  File "/Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/fastapi_utils/tasks.py", line 64, in loop
    await func()  # type: ignore
    ^^^^^^^^^^^^
  File "/Users/kacper/Documents/crypt-stat/backend/webapp.py", line 33, in run_background_worker
    exit(0)
  File "<frozen _sitebuiltins>", line 26, in __call__
SystemExit: 0
2023-11-21 23:49:32,648 [ERROR] Could not connect to db - it's most likely down
Traceback (most recent call last):
  File "/Users/kacper/Documents/crypt-stat/backend/webapp.py", line 30, in run_background_worker
    app.state.db = await create_pool(os.getenv("DB_URL"))
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/asyncpg/pool.py", line 403, in _async__init__
    await self._initialize()
  File "/Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/asyncpg/pool.py", line 430, in _initialize
    await first_ch.connect()
  File "/Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/asyncpg/pool.py", line 128, in connect
    self._con = await self._pool._get_new_connection()
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/asyncpg/pool.py", line 502, in _get_new_connection
    con = await connection.connect(
          ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/asyncpg/connection.py", line 2329, in connect
    return await connect_utils._connect(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/asyncpg/connect_utils.py", line 1017, in _connect
    raise last_error or exceptions.TargetServerAttributeNotMatched(
  File "/Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/asyncpg/connect_utils.py", line 991, in _connect
    conn = await _connect_addr(
           ^^^^^^^^^^^^^^^^^^^^
  File "/Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/asyncpg/connect_utils.py", line 828, in _connect_addr
    return await __connect_addr(params, True, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/asyncpg/connect_utils.py", line 873, in __connect_addr
    tr, pr = await connector
             ^^^^^^^^^^^^^^^
  File "/Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/asyncpg/connect_utils.py", line 744, in _create_ssl_connection
    tr, pr = await loop.create_connection(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.6/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/base_events.py", line 1093, in create_connection
    raise OSError('Multiple exceptions: {}'.format(
OSError: Multiple exceptions: [Errno 61] Connect call failed ('127.0.0.1', 5432), [Errno 61] Connect call failed ('::1', 5432, 0, 0)
2023-11-21 23:49:32,653 [ERROR] Task exception was never retrieved
future: <Task finished name='Task-4' coro=<repeat_every.<locals>.decorator.<locals>.wrapped.<locals>.loop() done, defined at /Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/fastapi_utils/tasks.py:57> exception=AttributeError("'State' object has no attribute 'db'")>
Traceback (most recent call last):
  File "/Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/starlette/datastructures.py", line 702, in __getattr__
    return self._state[key]
           ~~~~~~~~~~~^^^^^
KeyError: 'db'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/fastapi_utils/tasks.py", line 73, in loop
    raise exc
  File "/Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/fastapi_utils/tasks.py", line 64, in loop
    await func()  # type: ignore
    ^^^^^^^^^^^^
  File "/Users/kacper/Documents/crypt-stat/backend/webapp.py", line 34, in run_background_worker
    worker = Worker(db_pool=app.state.db)
                            ^^^^^^^^^^^^
  File "/Users/kacper/Documents/crypt-stat/venv/lib/python3.11/site-packages/starlette/datastructures.py", line 705, in __getattr__
    raise AttributeError(message.format(self.__class__.__name__, key))
AttributeError: 'State' object has no attribute 'db'
2023-11-21 23:49:42,464 [INFO] HTTP Request: GET https://web-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest?symbol=BTC%2CETH%2CUSDT%2CBNB%2CXRP%2CUSDC%2CSOL%2CADA%2CDOGE%2CTRX&convert=USD%2CAUD%2CCAD%2CCHF%2CCNY%2CEUR%2CGBP%2CJPY%2CPLN%2CRUB%2CAED "HTTP/1.1 200 OK"
